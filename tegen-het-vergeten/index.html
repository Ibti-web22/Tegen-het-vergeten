<!doctype html>
<html lang="nl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tegen het vergeten</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      html { scroll-behavior: smooth; }

      .grain {
        pointer-events: none;
        background-image:
          radial-gradient(circle at 20% 10%, rgba(255,255,255,.06) 0 1px, transparent 2px),
          radial-gradient(circle at 80% 30%, rgba(255,255,255,.05) 0 1px, transparent 2px),
          radial-gradient(circle at 40% 70%, rgba(255,255,255,.04) 0 1px, transparent 2px);
        background-size: 180px 180px, 220px 220px, 260px 260px;
        mix-blend-mode: overlay;
        opacity: .45;
      }

      .soft-glow { filter: drop-shadow(0 0 24px rgba(255,255,255,.10)); }

      /* Subtle pulse to draw attention */
      @keyframes softPulse {
        0%, 100% { transform: scale(1); opacity: 1; }
        50% { transform: scale(1.03); opacity: 0.92; }
      }
      .pulse-soft { animation: softPulse 1.8s ease-in-out infinite; }
    </style>
  </head>

  <body class="bg-black text-white selection:bg-white selection:text-black">
    <main class="relative">
      <section class="sticky top-0 h-screen overflow-hidden">
        <img
          id="memoryImg"
          src="Fotos/foto herrinering.jpg"
          alt="Herinneringsplek"
          class="absolute inset-0 h-full w-full object-cover"
          style="filter: blur(0px) saturate(1.05) contrast(1.05); opacity: 1;"
        />

        <div
          class="absolute inset-0"
          style="
            background:
              radial-gradient(1200px 700px at 50% 35%, rgba(0,0,0,0.15), rgba(0,0,0,0.75)),
              linear-gradient(to bottom, rgba(0,0,0,0.20), rgba(0,0,0,0.85));
          "
        ></div>

        <div class="absolute inset-0 grain"></div>

        <div class="absolute left-5 top-5 z-20 flex items-center gap-3">
          <div class="h-2 w-2 rounded-full bg-white/80"></div>
          <p class="text-xs tracking-[0.25em] text-white/80 uppercase">Tegen het vergeten</p>
        </div>

        <!-- BIG clear sound button (visible immediately) -->
        <button
          id="soundBtn"
          class="fixed bottom-5 right-5 z-50 pulse-soft
                 rounded-full border border-white/25 bg-white/10 px-5 py-3
                 text-sm text-white/95 backdrop-blur
                 shadow-lg shadow-black/40
                 hover:bg-white/15 hover:border-white/40
                 active:scale-[0.98] transition"
          type="button"
          aria-label="Geluid aanzetten"
        >
          üîä Klik hier om geluid aan te zetten
        </button>

        <div class="relative z-10 h-full flex items-center justify-center px-6">
          <div class="max-w-2xl text-center">
            <h1 class="text-4xl md:text-6xl font-semibold tracking-tight soft-glow">
              Een plek van vroeger.
            </h1>

            <p class="mt-5 text-base md:text-lg text-white/85">
              Ik zat in het lager onderwijs. Na school speelde ik hier elke dag.
            </p>

            <p class="mt-3 text-base md:text-lg text-white/75">
              In de zomer was heel de wijk buiten: voetbal, <span class="italic">The Voice</span>,
              stoelendans, watergevechten‚Ä¶
            </p>

            <div class="mt-8 flex items-center justify-center gap-3">
              <span class="inline-flex items-center rounded-full border border-white/20 bg-white/5 px-4 py-2 text-sm text-white/85">
                Scroll langzaam
              </span>
              <span class="text-sm text-white/60">‚Äî kijk & luister</span>
            </div>
          </div>
        </div>

        <div class="absolute bottom-6 left-0 right-0 z-20 flex flex-col items-center gap-2">
          <div class="h-9 w-[1px] bg-white/40"></div>
          <p id="progressLabel" class="text-xs tracking-widest text-white/70 uppercase">
            Herinnering: 100%
          </p>
        </div>

        <!-- AUDIO -->
        <audio id="scrollAudio" preload="auto" loop>
          <source src="audio/kids.mp3" type="audio/mpeg" />
        </audio>
      </section>

      <section class="relative h-[240vh]">
        <div class="absolute inset-0">
          <div class="sticky top-0 h-screen flex items-center justify-center px-6">
            <div class="max-w-xl w-full">
              <div
                id="line1"
                class="opacity-0 translate-y-6 transition-all duration-300
                       rounded-2xl border border-white/10 bg-white/5 p-6 backdrop-blur-md"
              >
                <p class="text-lg text-white/90">‚ÄúIedereen kende iedereen.‚Äù</p>
                <p class="mt-2 text-sm text-white/70">
                  Je hoorde stemmen, gelach, ballen op asfalt‚Ä¶ en je wist: dit is mijn wereld.
                </p>
              </div>

              <div class="h-6"></div>

              <div
                id="line2"
                class="opacity-0 translate-y-6 transition-all duration-300
                       rounded-2xl border border-white/10 bg-white/5 p-6 backdrop-blur-md"
              >
                <p class="text-lg text-white/90">‚ÄúHet voelde eindeloos.‚Äù</p>
                <p class="mt-2 text-sm text-white/70">
                  Elke dag na school. Zeker in de zomer. Tot het donker werd.
                </p>
              </div>

              <div class="h-6"></div>

              <div
                id="line3"
                class="opacity-0 translate-y-6 transition-all duration-300
                       rounded-2xl border border-white/10 bg-white/5 p-6 backdrop-blur-md"
              >
                <p class="text-lg text-white/90">‚ÄúEn nu‚Ä¶ vervaagt het.‚Äù</p>
                <p class="mt-2 text-sm text-white/70">
                  Niet ineens. Maar stap voor stap ‚Äî precies zoals herinneringen dat doen.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="relative min-h-[80vh] flex items-center justify-center px-6 bg-black">
        <div class="max-w-2xl text-center">
          <h2 class="text-2xl md:text-3xl font-semibold tracking-tight">Wat blijft hangen?</h2>
          <p class="mt-4 text-white/80 leading-relaxed">
            Het besef dat herinneringen niet verdwijnen met een klik.
            Ze worden stiller. Vager. Tot je je afvraagt of het echt zo was.
          </p>

          <div class="mt-8 flex flex-col sm:flex-row gap-3 justify-center">
            <button
              id="resetBtn"
              class="rounded-full border border-white/20 bg-white/5 px-6 py-3 text-sm text-white/90
                     hover:bg-white/10 transition"
              type="button"
            >
              Herinnering opnieuw bekijken
            </button>

            <a
              href="#"
              onclick="window.scrollTo({top:0, behavior:'smooth'}); return false;"
              class="rounded-full border border-white/20 bg-white/0 px-6 py-3 text-sm text-white/70
                     hover:text-white/90 hover:bg-white/5 transition"
            >
              Terug naar boven
            </a>
          </div>

          <p class="mt-8 text-xs tracking-widest text-white/50 uppercase">
            Prototype ‚Äî scroll = vervagen + audio = sfeer
          </p>
        </div>
      </section>
    </main>

    <script>
      const img = document.getElementById("memoryImg");
      const label = document.getElementById("progressLabel");

      const line1 = document.getElementById("line1");
      const line2 = document.getElementById("line2");
      const line3 = document.getElementById("line3");

      const resetBtn = document.getElementById("resetBtn");

      // Audio
      const audio = document.getElementById("scrollAudio");
      const soundBtn = document.getElementById("soundBtn");
      let audioEnabled = false; // user has enabled sound
      let isMuted = false;

      function clamp(n, min, max) {
        return Math.min(max, Math.max(min, n));
      }

      function showBlock(el, visible) {
        if (visible) {
          el.classList.remove("opacity-0", "translate-y-6");
          el.classList.add("opacity-100", "translate-y-0");
        } else {
          el.classList.add("opacity-0", "translate-y-6");
          el.classList.remove("opacity-100", "translate-y-0");
        }
      }

      async function enableSound() {
        try {
          audio.volume = 0.15; // start soft
          await audio.play();
          audioEnabled = true;
          isMuted = false;

          // Make button a toggle + stop pulsing
          soundBtn.classList.remove("pulse-soft");
          soundBtn.textContent = "üîá Geluid uit";
        } catch (e) {
          // If it still fails, keep text (browser blocking)
          soundBtn.textContent = "üîä Klik om geluid aan te zetten";
        }
      }

      function toggleSound() {
        if (!audioEnabled) {
          enableSound();
          return;
        }

        // Toggle mute
        isMuted = !isMuted;
        audio.muted = isMuted;

        soundBtn.textContent = isMuted ? "üîä Geluid aan" : "üîá Geluid uit";
      }

      soundBtn.addEventListener("click", toggleSound);

      function onScroll() {
        const start = window.innerHeight;
        const end = window.innerHeight * 3.2;
        const y = window.scrollY;

        const progress = clamp((y - start) / (end - start), 0, 1);

        // Visual forgetting
        const blur = 22 * progress;
        const sat = 1.05 - 0.80 * progress;
        const contrast = 1.05 - 0.15 * progress;
        const opacity = 1 - 0.82 * progress;

        img.style.filter = `blur(${blur.toFixed(1)}px) saturate(${sat.toFixed(2)}) contrast(${contrast.toFixed(2)})`;
        img.style.opacity = opacity.toFixed(2);

        const pct = Math.round((1 - progress) * 100);
        label.textContent = `Herinnering: ${pct}%`;

        // Text blocks
        showBlock(line1, progress > 0.08 && progress < 0.55);
        showBlock(line2, progress > 0.30 && progress < 0.78);
        showBlock(line3, progress > 0.62);

        // Audio volume follows scroll (only after user enabled)
        if (audioEnabled && !isMuted) {
          const vol = 0.15 + 0.25 * progress; // 0.15 -> 0.40
          audio.volume = clamp(vol, 0, 0.45);
        }
      }

      window.addEventListener("scroll", onScroll, { passive: true });
      onScroll();

      resetBtn.addEventListener("click", () => {
        window.scrollTo({ top: 0, behavior: "smooth" });

        audio.pause();
        audio.currentTime = 0;
        audioEnabled = false;
        isMuted = false;
        audio.muted = false;
        audio.volume = 0;

        // Reset button state
        soundBtn.classList.add("pulse-soft");
        soundBtn.textContent = "üîä Klik hier om geluid aan te zetten";
      });
    </script>
  </body>
</html>
